<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>GSoC 2025: My Journey with ArviZ - The-Broken-Keyboard</title><meta name="viewport" content="width=device-width, initial-scale=1">
	
  <meta itemprop="name" content="GSoC 2025: My Journey with ArviZ">
  <meta itemprop="description" content="Introduction This is a biweekly blog series chronicling my 12-week journey as a GSoC contributor this summer - a space where I’ll be documenting key milestones, reflections, and learnings from the project.
What is GSoC? Google Summer of Code is a global program that pairs contributors with open source organizations to work on impactful coding projects over the summer. For many, it’s a first dive into real-world, collaborative software development - beyond classroom assignments or personal repos. GSoC offers mentorship, a stipend, and most importantly, the experience of writing code that matters. You don’t just fix bugs or add features; you contribute to projects used by people around the world. It’s a rewarding blend of challenge, learning, and purpose - and a chance to give back to the open source community that powers so much of the tech we rely on.">
  <meta itemprop="datePublished" content="2025-06-13T22:29:21+05:30">
  <meta itemprop="dateModified" content="2025-06-13T22:29:21+05:30">
  <meta itemprop="wordCount" content="1451"><meta property="og:url" content="https://the-broken-keyboard.github.io/posts/gsoc/">
  <meta property="og:site_name" content="The-Broken-Keyboard">
  <meta property="og:title" content="GSoC 2025: My Journey with ArviZ">
  <meta property="og:description" content="Introduction This is a biweekly blog series chronicling my 12-week journey as a GSoC contributor this summer - a space where I’ll be documenting key milestones, reflections, and learnings from the project.
What is GSoC? Google Summer of Code is a global program that pairs contributors with open source organizations to work on impactful coding projects over the summer. For many, it’s a first dive into real-world, collaborative software development - beyond classroom assignments or personal repos. GSoC offers mentorship, a stipend, and most importantly, the experience of writing code that matters. You don’t just fix bugs or add features; you contribute to projects used by people around the world. It’s a rewarding blend of challenge, learning, and purpose - and a chance to give back to the open source community that powers so much of the tech we rely on.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-06-13T22:29:21+05:30">
    <meta property="article:modified_time" content="2025-06-13T22:29:21+05:30">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="GSoC 2025: My Journey with ArviZ">
  <meta name="twitter:description" content="Introduction This is a biweekly blog series chronicling my 12-week journey as a GSoC contributor this summer - a space where I’ll be documenting key milestones, reflections, and learnings from the project.
What is GSoC? Google Summer of Code is a global program that pairs contributors with open source organizations to work on impactful coding projects over the summer. For many, it’s a first dive into real-world, collaborative software development - beyond classroom assignments or personal repos. GSoC offers mentorship, a stipend, and most importantly, the experience of writing code that matters. You don’t just fix bugs or add features; you contribute to projects used by people around the world. It’s a rewarding blend of challenge, learning, and purpose - and a chance to give back to the open source community that powers so much of the tech we rely on.">
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://the-broken-keyboard.github.io/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://the-broken-keyboard.github.io/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://the-broken-keyboard.github.io/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://the-broken-keyboard.github.io/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="https://the-broken-keyboard.github.io/">
				<img src="https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg" alt="The-Broken-Keyboard" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="https://the-broken-keyboard.github.io/">The-Broken-Keyboard</a></h1>
	<div class="site-description"><p>Exploring tech, beyond the syntax</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/The-Broken-Keyboard" title="Github"><i data-feather="github"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li><li><a href="#" class="scheme-toggle" id="scheme-toggle"></a></li></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">All posts</a>
			</li>
			
			<li>
				<a href="https://www.linkedin.com/in/shreyansh-328b3324a/">Linkedin</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">13</span>
							<span class="rest">Jun 2025</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">GSoC 2025: My Journey with ArviZ</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/logos.png?raw=true" alt="NumFOCUS Logo"></p>
<h2 id="introduction">Introduction</h2>
<p>This is a biweekly blog series chronicling my 12-week journey as a GSoC contributor this summer - a space where I’ll be documenting key milestones, reflections, and learnings from the project.</p>
<h3 id="what-is-gsoc">What is GSoC?</h3>
<p>Google Summer of Code is a global program that pairs contributors with open source organizations to work on impactful coding projects over the summer. For many, it&rsquo;s a first dive into real-world, collaborative software development - beyond classroom assignments or personal repos. GSoC offers mentorship, a stipend, and most importantly, the experience of writing code that matters. You don’t just fix bugs or add features; you contribute to projects used by people around the world. It’s a rewarding blend of challenge, learning, and purpose - and a chance to give back to the open source community that powers so much of the tech we rely on.</p>
<h3 id="arviz-and-my-project">ArviZ and My Project</h3>
<p>For my GSoC <a href="https://summerofcode.withgoogle.com/programs/2025/projects/QEEVWGcd">project</a>, I am contributing to ArviZ, a Python library for the exploratory analysis and visualization of Bayesian inference models. These models are built on the principles of Bayesian statistics, where prior beliefs are combined with observed data to update our understanding of unknown parameters. Unlike traditional models that provide single-point estimates, Bayesian models yield full probability distributions, capturing uncertainty in a more nuanced way. ArviZ helps visualize these complex outputs and provides essential tools for model diagnostics, comparison, and criticism.
The project I&rsquo;m working on focuses on the ongoing refactor of ArviZ into a modular structure-specifically contributing to arviz-plots. My goal is to migrate and enhance core visualization tools from the original ArviZ, such as <strong>pair_plot</strong>, <strong>parallel_plot</strong> etc, while introducing new features like dark mode and improved support for circular variables in trace plot.
The mentors of my project are <a href="https://github.com/aloctavodia">Osvaldo A Martin</a>, <a href="https://github.com/OriolAbril">Oriol Abril Pla</a> and <a href="https://github.com/rohanbabbar04">Rohan Babbar</a></p>
<p>For further knowledge about ArviZ, you could refer to <a href="https://arviz-plots.readthedocs.io/en/latest/">the documentation</a></p>
<h2 id="bonding-period-may-8---june-2">Bonding Period (May 8 - June 2)</h2>
<p>The GSoC bonding period began on May 8th (the day the results were announced) and continued until June 2nd. Prior to this, I had already been contributing to ArviZ since February, although there was a short pause in my activity due to my end-semester exams. During the bonding period, we had our onboarding meeting where we outlined the initial goals for the project. The first task was to investigate the differences between the plotting functionalities in the new arviz-plots package and the original ArviZ (now referred to as arviz-legacy).</p>
<p>While many plotting functions had already been ported to arviz-plots, several features from the legacy implementation were still missing-primarily because they hadn’t been an immediate priority or say they were not required in immediate future. For instance, the groupby functionality in plot_ppc had not yet been implemented.</p>
<p>My focus during the bonding period was to carefully identify and document these gaps. After conducting a detailed comparison of the plotting functions between the two versions and engaging in several discussions with my mentors, I compiled a prioritized list of features to work on during the coding phase of GSoC.</p>
<h2 id="week-1--2-june-2---june-15">Week 1 &amp; 2 (June 2 - June 15)</h2>
<p>The GSoC coding period officially began on June 2nd, 2025, and my first task was to implement the <strong>pair_focus_plot</strong> function in arviz-plots. Although I had been contributing to ArviZ since February-mainly in the backend folder, where I worked on features like step_histogram and support for square root scaling across Matplotlib, Plotly, and Bokeh-this was my first major contribution involving a new batteries-included plot.</p>
<p>Unlike the isolated features I had worked on earlier, adding a full plotting function in arviz-plots required a deeper understanding of the library&rsquo;s internal design, especially the faceting and aesthetic mapping managers: PlotCollection and PlotMatrix. These managers abstract much of the complexity of arranging plots, handling aesthetics, and coordinating behavior across subplots.</p>
<p>To get up to speed, I spent considerable time studying the ArviZ-Plots <a href="https://arviz-plots.readthedocs.io/en/latest/api/managers.html">documentation</a>, experimenting with different manager methods such as <code>.wrap()</code>, <code>.grid()</code>, and <code>.map()</code>. Each serves a distinct purpose:</p>
<ul>
<li><code>.wrap()</code> is used to instantiate a PlotCollection and iterate over subsets, wrapping plots in a grid layout.</li>
<li><code>.grid()</code> arranges plots based on row and column iterators.</li>
<li><code>.map()</code> applies the plotting function across all plots while respecting aesthetic mappings.</li>
</ul>
<p>I also dove into the <code>DataTree</code> structure, which is used internally to represent hierarchical data in ArviZ. Understanding how to navigate and manipulate this data was essential for writing a reliable and flexible plotting function.</p>
<p>Following is a glimpse of posterior group of the <code>DataTree</code> I worked with:</p>
<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/data_root.png?raw=true" alt="Posterior Group"></p>
<h3 id="what-is-pair_focus_plot">What is pair_focus_plot?</h3>
<p>The <strong>pair_focus_plot</strong> function creates visualizations to explore relationships between a focus variable and several other variables. It includes:</p>
<ul>
<li>A <strong>scatter plot</strong> for the focus variable vs. each other variable</li>
<li>A <strong>divergence scatter plot</strong> highlighting divergent samples</li>
<li><strong>X and Y axis labels</strong></li>
</ul>
<p>To calculate the divergence mask, I referred to the implementation in the trace_plot function. After thoroughly testing different parameter combinations and edge cases with the PlotCollection manager, I was able to implement <strong>pair_focus_plot</strong> successfully.</p>
<h3 id="challenges-faced">Challenges Faced</h3>
<p><strong>Axis Sharing :</strong></p>
<p>One of the design challenges involved axis and label sharing. Depending on the context:</p>
<ul>
<li>If different variables are plotted on the x-axis (with the same domain), it makes sense to share only the axis, not the labels.</li>
<li>If the same variable is plotted repeatedly, both the axis and label should be shared.
However, in our current design choice, Plotly always forces shared labels along with shared axes, otherwise it leads to overlapping labels and titles of plots in upper and lower rows. After discussions with the mentors, we decided to keep the current behavior for now and revisit this issue in a future refinement.</li>
</ul>
<p><strong>Removing Focus Variable to Avoid Diagonal Plot:</strong></p>
<p>Another challenge was preventing a scatter plot of the focus variable against itself, which results in an uninformative diagonal line. This required removing the focus variable from the data. However, that introduced complications with maintaining coordinate dimensions in the DataTree. As a temporary workaround, we decided to allow plotting the focus variable against itself for now and revisit a cleaner solution later.</p>
<h3 id="additional-work">Additional Work</h3>
<p>During this period, I also:</p>
<ul>
<li>Contributed to documentation using Sphinx.</li>
<li>Wrote tests using the Hypothesis library (which I used for the first time).</li>
<li>Gained a deeper appreciation for the faceting manager-it makes complex visualizations much more manageable for both users and contributors.</li>
</ul>
<h3 id="final-result">Final result</h3>
<p>result of the <strong>pair_focus_plot</strong> function, which can be generated using the following code snippet:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#00f">from</span> arviz_base <span style="color:#00f">import</span> load_arviz_data
</span></span><span style="display:flex;"><span><span style="color:#00f">import</span> arviz_plots <span style="color:#00f">as</span> azp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>azp.style.use(<span style="color:#a31515">&#34;arviz-variat&#34;</span>)
</span></span><span style="display:flex;"><span>idata = load_arviz_data(<span style="color:#a31515">&#34;centered_eight&#34;</span>)
</span></span><span style="display:flex;"><span>visuals = {<span style="color:#a31515">&#34;divergence&#34;</span>: <span style="color:#00f">True</span> }
</span></span><span style="display:flex;"><span>print(idata)
</span></span><span style="display:flex;"><span>pc = azp.plot_pair_focus(
</span></span><span style="display:flex;"><span>    idata,
</span></span><span style="display:flex;"><span>    focus_var=idata.posterior[<span style="color:#a31515">&#34;theta&#34;</span>].sel(school=<span style="color:#a31515">&#34;Choate&#34;</span>),
</span></span><span style="display:flex;"><span>    var_names=[<span style="color:#a31515">&#34;tau&#34;</span>,<span style="color:#a31515">&#34;theta&#34;</span>],
</span></span><span style="display:flex;"><span>    backend=<span style="color:#a31515">&#34;bokeh&#34;</span>,
</span></span><span style="display:flex;"><span>    visuals = visuals,
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>pc.show()
</span></span></code></pre></div><h4 id="result">Result</h4>
<p>plotted <code>theta-choate</code> against <code>tau</code> and <code>theta</code> variables, with divergence highlighted.
<img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/pair_focus_plot.png?raw=true" alt="Pair Focus Plot"></p>
<p>After wrapping up the implementation, documentation, and testing for pair_focus_plot, I moved on to my next task: <strong>implementing the pair_plot function</strong>.</p>
<h3 id="continuing-with-pair_plot-all-variables-all-at-once">Continuing with pair_plot: All Variables, All At Once</h3>
<p>After completing <strong>pair_focus_plot</strong>, my next task was to implement <strong>pair_plot</strong> in arviz-plots. Conceptually, it’s similar to <strong>pair_focus_plot</strong>, but instead of plotting one focus variable against others, <strong>pair_plot</strong> visualizes all variables against each other. Each cell in the resulting grid displays a scatter plot of a variable pair, with additional support for highlighting divergent samples-just like in <strong>pair_focus_plot</strong>. Labels for rows and columns are added along the diagonal to help identify the plotted variables.</p>
<h3 id="getting-comfortable-with-plotmatrix">Getting Comfortable with PlotMatrix</h3>
<p>Since this plot required creating a full matrix of plots, I shifted focus from PlotCollection to the PlotMatrix faceting manager. I spent some time getting comfortable with its methods and behavior-particularly how it manages grid construction and handles aesthetics across the matrix. Once I was confident with the API and internal flow, I began the implementation</p>
<h3 id="a-key-challenge-handling-divergence-masks-using-plotmatrix">A Key Challenge: Handling Divergence Masks using PlotMatrix</h3>
<p>One interesting challenge I faced during this implementation was related to how PlotMatrix.map() works. Internally, it passes kwargs argument to the visual function by directly merging it into fun_kwargs. However, this becomes tricky when dealing with the divergence mask.</p>
<p>We only want to pass the relevant subset of the divergence mask corresponding to the current pair of variables being plotted-not the full mask. Initially, this wasn’t working as expected, and divergent data points weren’t being visualized.</p>
<p>To fix this, I modified the way divergence masks were passed so that only the appropriate slice of the mask reached the visual function. Once this adjustment was in place, the divergence scatter plots rendered correctly across the matrix.</p>
<h3 id="final-result-1">Final Result</h3>
<p>Result of <strong>pair_plot</strong> function, which can be generated using the following code snippet:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#00f">from</span> arviz_base <span style="color:#00f">import</span> load_arviz_data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00f">import</span> arviz_plots <span style="color:#00f">as</span> azp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>azp.style.use(<span style="color:#a31515">&#34;arviz-variat&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data = load_arviz_data(<span style="color:#a31515">&#34;centered_eight&#34;</span>)
</span></span><span style="display:flex;"><span>visuals = {<span style="color:#a31515">&#34;divergence&#34;</span>: <span style="color:#00f">True</span>}
</span></span><span style="display:flex;"><span>pc = azp.plot_pair(
</span></span><span style="display:flex;"><span>    data,
</span></span><span style="display:flex;"><span>    backend=<span style="color:#a31515">&#34;bokeh&#34;</span> , 
</span></span><span style="display:flex;"><span>    coords={<span style="color:#a31515">&#34;school&#34;</span>: [<span style="color:#a31515">&#34;Choate&#34;</span>, <span style="color:#a31515">&#34;Deerfield&#34;</span>]},
</span></span><span style="display:flex;"><span>    visuals=visuals,
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>pc.show()
</span></span></code></pre></div><h4 id="result-1">Result</h4>
<p>plotted <code>mu</code>,<code>tau</code>, <code>theta-choate</code> and <code>theta-deerfield</code> against each other, with divergence highlighted.</p>
<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/pair_plot.png?raw=true" alt="Pair Plot Result"></p>
<p>I will be adding documentation and tests for <strong>pair_plot</strong> in the coming weeks.</p>

			</div>

			<div class="tags">
				
					
				
			</div>
</div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2025 visit <a href="https://github.com/The-Broken-Keyboard">My Profile</a> </div>
	</nav>
</div>

<script>feather.replace()</script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>GSoC 2025: My Journey with ArviZ - The-Broken-Keyboard</title><meta name="viewport" content="width=device-width, initial-scale=1">
	
  <meta itemprop="name" content="GSoC 2025: My Journey with ArviZ">
  <meta itemprop="description" content="Introduction This is a biweekly blog series chronicling my 12-week journey as a GSoC contributor this summer - a space where I’ll be documenting key milestones, reflections, and learnings from the project.
What is GSoC? Google Summer of Code is a global program that pairs contributors with open source organizations to work on impactful coding projects over the summer. For many, it’s a first dive into real-world, collaborative software development - beyond classroom assignments or personal repos. GSoC offers mentorship, a stipend, and most importantly, the experience of writing code that matters. You don’t just fix bugs or add features; you contribute to projects used by people around the world. It’s a rewarding blend of challenge, learning, and purpose - and a chance to give back to the open source community that powers so much of the tech we rely on.">
  <meta itemprop="datePublished" content="2025-06-13T22:29:21+05:30">
  <meta itemprop="dateModified" content="2025-06-13T22:29:21+05:30">
  <meta itemprop="wordCount" content="2854"><meta property="og:url" content="https://the-broken-keyboard.github.io/posts/gsoc/">
  <meta property="og:site_name" content="The-Broken-Keyboard">
  <meta property="og:title" content="GSoC 2025: My Journey with ArviZ">
  <meta property="og:description" content="Introduction This is a biweekly blog series chronicling my 12-week journey as a GSoC contributor this summer - a space where I’ll be documenting key milestones, reflections, and learnings from the project.
What is GSoC? Google Summer of Code is a global program that pairs contributors with open source organizations to work on impactful coding projects over the summer. For many, it’s a first dive into real-world, collaborative software development - beyond classroom assignments or personal repos. GSoC offers mentorship, a stipend, and most importantly, the experience of writing code that matters. You don’t just fix bugs or add features; you contribute to projects used by people around the world. It’s a rewarding blend of challenge, learning, and purpose - and a chance to give back to the open source community that powers so much of the tech we rely on.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-06-13T22:29:21+05:30">
    <meta property="article:modified_time" content="2025-06-13T22:29:21+05:30">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="GSoC 2025: My Journey with ArviZ">
  <meta name="twitter:description" content="Introduction This is a biweekly blog series chronicling my 12-week journey as a GSoC contributor this summer - a space where I’ll be documenting key milestones, reflections, and learnings from the project.
What is GSoC? Google Summer of Code is a global program that pairs contributors with open source organizations to work on impactful coding projects over the summer. For many, it’s a first dive into real-world, collaborative software development - beyond classroom assignments or personal repos. GSoC offers mentorship, a stipend, and most importantly, the experience of writing code that matters. You don’t just fix bugs or add features; you contribute to projects used by people around the world. It’s a rewarding blend of challenge, learning, and purpose - and a chance to give back to the open source community that powers so much of the tech we rely on.">
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://the-broken-keyboard.github.io/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://the-broken-keyboard.github.io/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://the-broken-keyboard.github.io/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://the-broken-keyboard.github.io/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="https://the-broken-keyboard.github.io/">
				<img src="https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg" alt="The-Broken-Keyboard" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="https://the-broken-keyboard.github.io/">The-Broken-Keyboard</a></h1>
	<div class="site-description"><p>Exploring tech, beyond the syntax</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/The-Broken-Keyboard" title="Github"><i data-feather="github"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li><li><a href="#" class="scheme-toggle" id="scheme-toggle"></a></li></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">All posts</a>
			</li>
			
			<li>
				<a href="https://www.linkedin.com/in/shreyansh-328b3324a/">LinkedIn</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">13</span>
							<span class="rest">Jun 2025</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">GSoC 2025: My Journey with ArviZ</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/logos.png?raw=true" alt="NumFOCUS Logo"></p>
<h2 id="introduction">Introduction</h2>
<p>This is a biweekly blog series chronicling my 12-week journey as a GSoC contributor this summer - a space where I’ll be documenting key milestones, reflections, and learnings from the project.</p>
<h3 id="what-is-gsoc">What is GSoC?</h3>
<p>Google Summer of Code is a global program that pairs contributors with open source organizations to work on impactful coding projects over the summer. For many, it&rsquo;s a first dive into real-world, collaborative software development - beyond classroom assignments or personal repos. GSoC offers mentorship, a stipend, and most importantly, the experience of writing code that matters. You don’t just fix bugs or add features; you contribute to projects used by people around the world. It’s a rewarding blend of challenge, learning, and purpose - and a chance to give back to the open source community that powers so much of the tech we rely on.</p>
<h3 id="arviz-and-my-project">ArviZ and My Project</h3>
<p>For my GSoC <a href="https://summerofcode.withgoogle.com/programs/2025/projects/QEEVWGcd">project</a>, I am contributing to ArviZ, a Python library for the exploratory analysis and visualization of Bayesian inference models. These models are built on the principles of Bayesian statistics, where prior beliefs are combined with observed data to update our understanding of unknown parameters. Unlike traditional models that provide single-point estimates, Bayesian models yield full probability distributions, capturing uncertainty in a more nuanced way. ArviZ helps visualize these complex outputs and provides essential tools for model diagnostics, comparison, and criticism.
The project I&rsquo;m working on focuses on the ongoing refactor of ArviZ into a modular structure-specifically contributing to arviz-plots. My goal is to migrate and enhance core visualization tools from the original ArviZ, such as <strong>pair_plot</strong>, <strong>parallel_plot</strong> etc, while introducing new features like dark mode and improved support for circular variables in trace plot.
The mentors of my project are <a href="https://github.com/aloctavodia">Osvaldo A Martin</a>, <a href="https://github.com/OriolAbril">Oriol Abril Pla</a> and <a href="https://github.com/rohanbabbar04">Rohan Babbar</a></p>
<p>For further knowledge about ArviZ, you could refer to <a href="https://arviz-plots.readthedocs.io/en/latest/">the documentation</a></p>
<h2 id="bonding-period-may-8---june-2">Bonding Period (May 8 - June 2)</h2>
<p>The GSoC bonding period began on May 8th (the day the results were announced) and continued until June 2nd. Prior to this, I had already been contributing to ArviZ since February, although there was a short pause in my activity due to my end-semester exams. During the bonding period, we had our onboarding meeting where we outlined the initial goals for the project. The first task was to investigate the differences between the plotting functionalities in the new arviz-plots package and the original ArviZ (now referred to as arviz-legacy).</p>
<p>While many plotting functions had already been ported to arviz-plots, several features from the legacy implementation were still missing-primarily because they hadn’t been an immediate priority or say they were not required in immediate future. For instance, the groupby functionality in plot_ppc had not yet been implemented.</p>
<p>My focus during the bonding period was to carefully identify and document these gaps. After conducting a detailed comparison of the plotting functions between the two versions and engaging in several discussions with my mentors, I compiled a prioritized list of features to work on during the coding phase of GSoC.</p>
<h2 id="week-1--2-june-2---june-16">Week 1 &amp; 2 (June 2 - June 16)</h2>
<p>The GSoC coding period officially began on June 2nd, 2025, and my first task was to implement the <strong>pair_focus_plot</strong> function in arviz-plots. Although I had been contributing to ArviZ since February-mainly in the backend folder, where I worked on features like step_histogram and support for square root scaling across Matplotlib, Plotly, and Bokeh-this was my first major contribution involving a new batteries-included plot.</p>
<p>Unlike the isolated features I had worked on earlier, adding a full plotting function in arviz-plots required a deeper understanding of the library&rsquo;s internal design, especially the faceting and aesthetic mapping managers: PlotCollection and PlotMatrix. These managers abstract much of the complexity of arranging plots, handling aesthetics, and coordinating behavior across subplots.</p>
<p>To get up to speed, I spent considerable time studying the ArviZ-Plots <a href="https://arviz-plots.readthedocs.io/en/latest/api/managers.html">documentation</a>, experimenting with different manager methods such as <code>.wrap()</code>, <code>.grid()</code>, and <code>.map()</code>. Each serves a distinct purpose:</p>
<ul>
<li><code>.wrap()</code> is used to instantiate a PlotCollection and iterate over subsets, wrapping plots in a grid layout.</li>
<li><code>.grid()</code> arranges plots based on row and column iterators.</li>
<li><code>.map()</code> applies the plotting function across all plots while respecting aesthetic mappings.</li>
</ul>
<p>I also dove into the <code>DataTree</code> structure, which is used internally to represent hierarchical data in ArviZ. Understanding how to navigate and manipulate this data was essential for writing a reliable and flexible plotting function.</p>
<p>Following is a glimpse of posterior group of the <code>DataTree</code> I worked with:</p>
<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/data_root.png?raw=true" alt="Posterior Group"></p>
<h3 id="what-is-pair_focus_plot">What is pair_focus_plot?</h3>
<p>The <strong>pair_focus_plot</strong> function creates visualizations to explore relationships between a focus variable and several other variables. It includes:</p>
<ul>
<li>A <strong>scatter plot</strong> for the focus variable vs. each other variable</li>
<li>A <strong>divergence scatter plot</strong> highlighting divergent samples</li>
<li><strong>X and Y axis labels</strong></li>
</ul>
<p>To calculate the divergence mask, I referred to the implementation in the trace_plot function. After thoroughly testing different parameter combinations and edge cases with the PlotCollection manager, I was able to implement <strong>pair_focus_plot</strong> successfully.</p>
<h3 id="challenges-faced">Challenges Faced</h3>
<p><strong>Axis Sharing :</strong></p>
<p>One of the design challenges involved axis and label sharing. Depending on the context:</p>
<ul>
<li>If different variables are plotted on the x-axis (with the same domain), it makes sense to share only the axis, not the labels.</li>
<li>If the same variable is plotted repeatedly, both the axis and label should be shared.
However, in our current design choice, Plotly always forces shared labels along with shared axes, otherwise it leads to overlapping labels and titles of plots in upper and lower rows. After discussions with the mentors, we decided to keep the current behavior for now and revisit this issue in a future refinement.</li>
</ul>
<p><strong>Removing Focus Variable to Avoid Diagonal Plot:</strong></p>
<p>Another challenge was preventing a scatter plot of the focus variable against itself, which results in an uninformative diagonal line. This required removing the focus variable from the data. However, that introduced complications with maintaining coordinate dimensions in the DataTree. As a temporary workaround, we decided to allow plotting the focus variable against itself for now and revisit a cleaner solution later.</p>
<h3 id="additional-work">Additional Work</h3>
<p>During this period, I also:</p>
<ul>
<li>Contributed to documentation using Sphinx.</li>
<li>Wrote tests using the Hypothesis library (which I used for the first time).</li>
<li>Gained a deeper appreciation for the faceting manager-it makes complex visualizations much more manageable for both users and contributors.</li>
</ul>
<h3 id="final-result">Final result</h3>
<p>result of the <strong>pair_focus_plot</strong> function, which can be generated using the following code snippet:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> arviz_base <span style="color:#f92672">import</span> load_arviz_data
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> arviz_plots <span style="color:#66d9ef">as</span> azp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>azp<span style="color:#f92672">.</span>style<span style="color:#f92672">.</span>use(<span style="color:#e6db74">&#34;arviz-variat&#34;</span>)
</span></span><span style="display:flex;"><span>idata <span style="color:#f92672">=</span> load_arviz_data(<span style="color:#e6db74">&#34;centered_eight&#34;</span>)
</span></span><span style="display:flex;"><span>visuals <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;divergence&#34;</span>: <span style="color:#66d9ef">True</span> }
</span></span><span style="display:flex;"><span>print(idata)
</span></span><span style="display:flex;"><span>pc <span style="color:#f92672">=</span> azp<span style="color:#f92672">.</span>plot_pair_focus(
</span></span><span style="display:flex;"><span>    idata,
</span></span><span style="display:flex;"><span>    focus_var<span style="color:#f92672">=</span>idata<span style="color:#f92672">.</span>posterior[<span style="color:#e6db74">&#34;theta&#34;</span>]<span style="color:#f92672">.</span>sel(school<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Choate&#34;</span>),
</span></span><span style="display:flex;"><span>    var_names<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;tau&#34;</span>,<span style="color:#e6db74">&#34;theta&#34;</span>],
</span></span><span style="display:flex;"><span>    backend<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bokeh&#34;</span>,
</span></span><span style="display:flex;"><span>    visuals <span style="color:#f92672">=</span> visuals,
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>pc<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><h4 id="result">Result</h4>
<p>plotted <code>theta-choate</code> against <code>tau</code> and <code>theta</code> variables, with divergence highlighted.
<img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/pair_focus_plot.png?raw=true" alt="Pair Focus Plot"></p>
<p>After wrapping up the implementation, documentation, and testing for pair_focus_plot, I moved on to my next task: <strong>implementing the pair_plot function</strong>.</p>
<h3 id="continuing-with-pair_plot-all-variables-all-at-once">Continuing with pair_plot: All Variables, All At Once</h3>
<p>After completing <strong>pair_focus_plot</strong>, my next task was to implement <strong>pair_plot</strong> in arviz-plots. Conceptually, it’s similar to <strong>pair_focus_plot</strong>, but instead of plotting one focus variable against others, <strong>pair_plot</strong> visualizes all variables against each other. Each cell in the resulting grid displays a scatter plot of a variable pair, with additional support for highlighting divergent samples-just like in <strong>pair_focus_plot</strong>. Labels for rows and columns are added along the diagonal to help identify the plotted variables.</p>
<h3 id="getting-comfortable-with-plotmatrix">Getting Comfortable with PlotMatrix</h3>
<p>Since this plot required creating a full matrix of plots, I shifted focus from PlotCollection to the PlotMatrix faceting manager. I spent some time getting comfortable with its methods and behavior-particularly how it manages grid construction and handles aesthetics across the matrix. Once I was confident with the API and internal flow, I began the implementation</p>
<h3 id="a-key-challenge-handling-divergence-masks-using-plotmatrix">A Key Challenge: Handling Divergence Masks using PlotMatrix</h3>
<p>One interesting challenge I faced during this implementation was related to how PlotMatrix.map() works. Internally, it passes kwargs argument to the visual function by directly merging it into fun_kwargs. However, this becomes tricky when dealing with the divergence mask.</p>
<p>We only want to pass the relevant subset of the divergence mask corresponding to the current pair of variables being plotted-not the full mask. Initially, this wasn’t working as expected, and divergent data points weren’t being visualized.</p>
<p>To fix this, I modified the way divergence masks were passed so that only the appropriate slice of the mask reached the visual function. Once this adjustment was in place, the divergence scatter plots rendered correctly across the matrix.</p>
<h3 id="final-result-1">Final Result</h3>
<p>Result of <strong>pair_plot</strong> function, which can be generated using the following code snippet:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> arviz_base <span style="color:#f92672">import</span> load_arviz_data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> arviz_plots <span style="color:#66d9ef">as</span> azp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>azp<span style="color:#f92672">.</span>style<span style="color:#f92672">.</span>use(<span style="color:#e6db74">&#34;arviz-variat&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> load_arviz_data(<span style="color:#e6db74">&#34;centered_eight&#34;</span>)
</span></span><span style="display:flex;"><span>visuals <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;divergence&#34;</span>: <span style="color:#66d9ef">True</span>}
</span></span><span style="display:flex;"><span>pc <span style="color:#f92672">=</span> azp<span style="color:#f92672">.</span>plot_pair(
</span></span><span style="display:flex;"><span>    data,
</span></span><span style="display:flex;"><span>    backend<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bokeh&#34;</span> ,
</span></span><span style="display:flex;"><span>    coords<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;school&#34;</span>: [<span style="color:#e6db74">&#34;Choate&#34;</span>, <span style="color:#e6db74">&#34;Deerfield&#34;</span>]},
</span></span><span style="display:flex;"><span>    visuals<span style="color:#f92672">=</span>visuals,
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>pc<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><h4 id="result-1">Result</h4>
<p>plotted <code>mu</code>,<code>tau</code>, <code>theta-choate</code> and <code>theta-deerfield</code> against each other, with divergence highlighted.</p>
<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/pair_plot.png?raw=true" alt="Pair Plot Result"></p>
<p>I will be adding documentation and tests for <strong>pair_plot</strong> in the coming weeks.</p>
<h2 id="week-3--4-june-17---july-1">Week 3 &amp; 4 (June 17 - July 1)</h2>
<h3 id="deep-dive-into-pair_plot-and-beyond">Deep Dive into <code>pair_plot</code> and Beyond</h3>
<p>After kicking off <code>pair_plot</code> at the end of Week 2, I continued working on it through Weeks 3 and 4. While the concept initially seemed straightforward, implementing it turned out to be far more intricate. The challenge lay not just in plotting variable pairs, but in ensuring the visual output aligned with user expectations and supported features like flexible triangle types, axis sharing and diagonal marginals.</p>
<h3 id="getting-comfortable-with-plotmatrix-1">Getting Comfortable with <strong>PlotMatrix</strong></h3>
<p>Having just begun exploring <code>PlotMatrix</code> in the previous weeks, I spent more time getting familiar with its internals. Unlike <code>PlotCollection</code>, <code>PlotMatrix</code> offers specialized methods like <code>.map_triangle()</code> and <code>.map()</code> for targeting specific regions of the grid, including the diagonal. However, we also needed functionality to map a function across an entire row or column, which wasn’t directly supported out of the box.</p>
<p>Initially, I attempted to create a new method called <code>map_row_col</code>, borrowing logic from <code>map_triangle</code>, to address this. While it worked, the approach introduced a lot of code duplication. After discussions with my mentors, we brainstormed a cleaner solution using the existing <code>.map()</code> method in combination with additional metadata. We ended up extending <code>PlotMatrix</code> with three new attributes - <code>orientation</code>, <code>fixed_var_name</code>, and <code>fixed_selection</code> - and adjusted the <code>get_target()</code> helper to support the new behavior. This allowed us to reuse existing logic efficiently and achieve the same result with cleaner code.</p>
<h3 id="enhancing-the-diagonal-adding-marginals">Enhancing the Diagonal: Adding Marginals</h3>
<p>The diagonal plots in <code>pair_plot</code> initially only displayed variable names as text labels, but we wanted to support marginal distributions by default. At first, I started implementing the marginal plots from scratch, but that led to unnecessary duplication. Eventually, we decided to reuse the existing <code>plot_dist</code> function, which made the implementation more consistent and modular.</p>
<p>This refactor taught me a lot about good design practices—especially the importance of code reusability and maintaining clean abstraction layers. I found it incredibly rewarding to work through these challenges and get a deeper understanding of the design decisions behind ArviZ’s plotting architecture.</p>
<h3 id="results">Results</h3>
<p>Result of <code>pair_plot</code> function, which can be generated using the following code snippet:</p>
<h4 id="code-trianglelower-by-default">Code (<code>triangle=&quot;lower&quot;</code> by default)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> arviz_base <span style="color:#f92672">import</span> load_arviz_data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> arviz_plots <span style="color:#66d9ef">as</span> azp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>azp<span style="color:#f92672">.</span>style<span style="color:#f92672">.</span>use(<span style="color:#e6db74">&#34;arviz-variat&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> load_arviz_data(<span style="color:#e6db74">&#34;centered_eight&#34;</span>)
</span></span><span style="display:flex;"><span>pc <span style="color:#f92672">=</span> azp<span style="color:#f92672">.</span>plot_pair(
</span></span><span style="display:flex;"><span>    data,
</span></span><span style="display:flex;"><span>    backend<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bokeh&#34;</span> ,
</span></span><span style="display:flex;"><span>    coords<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;school&#34;</span>: [<span style="color:#e6db74">&#34;Choate&#34;</span>, <span style="color:#e6db74">&#34;Deerfield&#34;</span>]},
</span></span><span style="display:flex;"><span>    visuals<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;divergence&#34;</span>: <span style="color:#66d9ef">True</span>,},
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>pc<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><h4 id="result-trianglelower-by-default">Result (<code>triangle=&quot;lower&quot;</code> by default)</h4>
<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/pair_plot_lower.png?raw=true" alt="Pair Plot Result 1"></p>
<h4 id="code-triangleupper">Code (<code>triangle=&quot;upper&quot;</code>)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> arviz_base <span style="color:#f92672">import</span> load_arviz_data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> arviz_plots <span style="color:#66d9ef">as</span> azp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>azp<span style="color:#f92672">.</span>style<span style="color:#f92672">.</span>use(<span style="color:#e6db74">&#34;arviz-variat&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> load_arviz_data(<span style="color:#e6db74">&#34;centered_eight&#34;</span>)
</span></span><span style="display:flex;"><span>pc <span style="color:#f92672">=</span> azp<span style="color:#f92672">.</span>plot_pair(
</span></span><span style="display:flex;"><span>    data,
</span></span><span style="display:flex;"><span>    backend<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bokeh&#34;</span> ,
</span></span><span style="display:flex;"><span>    coords<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;school&#34;</span>: [<span style="color:#e6db74">&#34;Choate&#34;</span>, <span style="color:#e6db74">&#34;Deerfield&#34;</span>]},
</span></span><span style="display:flex;"><span>    triangle<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;upper&#34;</span>,
</span></span><span style="display:flex;"><span>    visuals<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;divergence&#34;</span>: <span style="color:#66d9ef">True</span>,},
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>pc<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><h4 id="result-triangleupper">Result (<code>triangle=&quot;upper&quot;</code>)</h4>
<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/pair_plot_upper.png?raw=true" alt="Pair Plot Result 2"></p>
<h4 id="code-triangleboth">Code (<code>triangle=&quot;both&quot;</code>)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> arviz_base <span style="color:#f92672">import</span> load_arviz_data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> arviz_plots <span style="color:#66d9ef">as</span> azp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>azp<span style="color:#f92672">.</span>style<span style="color:#f92672">.</span>use(<span style="color:#e6db74">&#34;arviz-variat&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> load_arviz_data(<span style="color:#e6db74">&#34;centered_eight&#34;</span>)
</span></span><span style="display:flex;"><span>pc <span style="color:#f92672">=</span> azp<span style="color:#f92672">.</span>plot_pair(
</span></span><span style="display:flex;"><span>    data,
</span></span><span style="display:flex;"><span>    backend<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bokeh&#34;</span> ,
</span></span><span style="display:flex;"><span>    coords<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;school&#34;</span>: [<span style="color:#e6db74">&#34;Choate&#34;</span>, <span style="color:#e6db74">&#34;Deerfield&#34;</span>]},
</span></span><span style="display:flex;"><span>    triangle<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;both&#34;</span>,
</span></span><span style="display:flex;"><span>    visuals<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;divergence&#34;</span>: <span style="color:#66d9ef">True</span>,},
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>pc<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><h4 id="result-triangleboth">Result (<code>triangle=&quot;both&quot;</code>)</h4>
<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/pair_plot_both.png?raw=true" alt="Pair Plot Result 3"></p>
<h3 id="current-and-future-plan-from-violin-plot-to-parallel-plot">Current and future plan (From Violin Plot to Parallel Plot)</h3>
<p>Once <code>pair_plot</code> was in good shape, I began working on a <code>violin plot</code>. However, after receiving feedback from several contributors, we decided to drop the <code>violin plot</code> in favor of focusing on more impactful visualizations.</p>
<p>I then shifted to implementing the <code>parallel plot</code>, which I’m currently working on. Additionally, a new task was added to my to-do list: implementing filled faces in <code>plot_dist</code>, which I’ll be tackling after the <code>parallel plot</code> is complete.</p>
<p>These past two weeks were packed with problem-solving, learning, and refining-giving me a much clearer picture of ArviZ&rsquo;s plotting system and how to contribute effectively to its evolving modular structure.</p>
<h2 id="week-5--6-june-2---july-16">Week 5 &amp; 6 (June 2 - July 16)</h2>
<p>After we decided to drop the <code>violin_plot</code> task in the previous weeks, I shifted my focus to implementing the <code>parallel_plot</code>. While this plot didn’t require as many visual components as <code>pair_plot</code>, it came with its own unique challenges particularly around data structure and aesthetic management.</p>
<h3 id="implementing-parallel_plot-a-structural-challenge">Implementing <code>parallel_plot</code>: A Structural Challenge</h3>
<p>Unlike previous plots, <code>parallel_plot</code> required all variables to be plotted on the same coordinate system, meaning we needed to restructure the data into a format that could accommodate this layout. The solution - we arrived at after a lot of brainstorming with my mentor - was to stack the sampling dimensions into a single multi-indexed dimension called <code>sample</code>. This allowed each variable to be aligned along a common axis for the <code>parallel coordinates plot</code>.</p>
<p>Once the structure was in place, we worked on several optimizations:</p>
<ul>
<li><strong>Divergence highlighting:</strong> By adding divergence information as a coordinate to the data, we were able to plot both <code>divergent</code> and <code>non-divergent</code> samples in a single call to <code>multiple_lines</code>, making the implementation cleaner and more efficient.</li>
<li><strong>Tick label management:</strong> With many variables plotted along the x-axis, label collisions became an issue. We introduced label rotation to improve readability. However, long variable names still cause crowding and plot compression-something we’ve noted for future refinement.</li>
</ul>
<p>With these issues addressed, <code>parallel_plot</code> was complete and functioning as intended.</p>
<h4 id="result-2">Result</h4>
<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/parallel.png?raw=true" alt="Parallel Plot Result"></p>
<h3 id="enhancing-dist_plot-supporting-filled-distributions">Enhancing <code>dist_plot</code>: Supporting Filled Distributions</h3>
<p>After wrapping up <code>parallel_plot</code>, I moved on to enhancing <code>dist_plot</code> to support <strong>filled faces</strong> (shaded areas under the curve), in addition to the existing line-based visualizations like KDE, ECDF, and histogram lines.</p>
<p>This enhancement, while seemingly simple, had its own complexities. Since <code>dist_plot</code> is used internally by many other plotting functions-each passing its own set of aesthetic mappings-we had to ensure that filled faces respected all existing aesthetic variations. After carefully handling these edge cases, <code>dist_plot</code> now supports filled visuals by default (with the option to disable them), making it more expressive and flexible.</p>
<p>This change also opens the door to generalizing <code>ridge_plot</code> by making it use the updated <code>dist_plot</code>.</p>
<h4 id="result-3">Result</h4>
<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/filled_dist.png?raw=true" alt="Filled Dist Plot Result"></p>
<h3 id="behind-the-scenes-tests-and-docs">Behind the Scenes: Tests and Docs</h3>
<p>In parallel with these implementations, I spent a significant amount of time refining documentation and improving tests for <code>pair_plot</code> and <code>parallel_plot</code>, ensuring better clarity, examples, and robust coverage.</p>
<h3 id="future-plan">Future Plan</h3>
<p>My next focus will be implementing a dark theme for ArviZ plots and I will also keep refining the works done till now wherever required.</p>
<h2 id="week-7--8-july-17---july-31">Week 7 &amp; 8 (July 17 - July 31)</h2>
<p>Over the past two weeks, I focused on improving the usability and flexibility  <code>parallel_plot</code> and <code>dist_plot</code>, while also laying important groundwork for <code>dark_theme</code> support.</p>
<h3 id="tackling-the-xtick-label-compression-in-parallel-plot">Tackling the xtick label compression in parallel plot</h3>
<p>One of the most pressing issues was the <code>xtick</code> labels in the <code>parallel_plot</code>. When these labels were rotated to prevent overlap-especially when visualizing multiple variables-they began consuming nearly 40–50% of the plot height, leading to severe compression of the actual visualization.</p>
<p>Initially, I experimented with creating a separate row for the labels, similar to how it&rsquo;s handled in <code>forest</code> and <code>ridge</code> plots. However, this approach introduced unnecessary complexity. Following my mentor’s advice, I pivoted to a simpler yet effective solution: <strong>increasing the figure’s height dynamically during figsize calculation</strong>. This involved calculating the maximum label length after setting the font size, and then manually adjusting the height accordingly. This approach worked smoothly and resolved the plot compression issue.</p>
<h3 id="refactoring-histogram-variations-step-vs-filled">Refactoring histogram variations: step vs filled</h3>
<p>Another major focus was cleaning up the implementation of histogram variants. <code>ArviZ-plots</code> supports both <code>step histograms</code> and <code>filled histograms</code>, but previously, both were handled by the same function. This led to API inconsistencies-for example, step histograms needed line-specific styling arguments (linestyle, linewidth), which were irrelevant for filled ones.</p>
<p>To address this, we:</p>
<ul>
<li>Separated the backend functions for <code>step</code> and <code>filled</code> histograms.</li>
<li>Added a dedicated <code>visual</code> function to call the appropriate backend method for <code>step</code> histograms.</li>
</ul>
<p>We modified the dist_plot behavior by defaulting <code>face_kwargs</code> to <code>False</code>, as filled plots aren’t typically required in most use cases. Also, added corresponding tests to test behaviour of <code>dist_plot</code> with <code>face_kwargs=True</code> and <code>face_kwargs=False</code>.</p>
<p>With this, the refactoring of <code>dist_plot</code> is nearly complete.</p>
<h3 id="initiating-dark-theme-support">Initiating dark theme support</h3>
<p>I also began work on <code>dark_theme</code> support, which brought a new set of challenges. A core part of this task was <strong>selecting a palette</strong> of colors that:</p>
<ul>
<li>Offer <strong>strong contrast</strong> against dark backgrounds.</li>
<li>Remain <strong>color-blind friendly</strong>.</li>
</ul>
<p>After consulting multiple accessibility and contrast resources, I finalized a suitable set of colors and implemented initial dark theme support.</p>
<p>However, a number of enhancements remain:</p>
<ul>
<li>Many tick labels, titles, and other text elements have manually <strong>hardcoded colors</strong> that don&rsquo;t adapt to the theme.</li>
<li><strong>Bokeh</strong> (used in some visualizations) currently lacks support for styling the grid lines that separate subplots. On a dark background, this results in visible white grid lines that previously blended in with light themes.</li>
</ul>
<h4 id="result-4">Result</h4>
<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/dark_pair.png?raw=true" alt="Dark themed pair plot"></p>
<p><img src="https://github.com/The-Broken-Keyboard/The-Broken-Keyboard.github.io/blob/main/dark_trace_dist.png?raw=true" alt="Dark themed trace dist plot"></p>
<h3 id="future-plans">Future Plans:</h3>
<p>In the coming weeks, my focus will shift toward:</p>
<ul>
<li>Dynamically adapting all label and title colors to the selected theme.</li>
<li>Resolving Bokeh’s subplot grid line issue.</li>
<li>Implementing support for <strong>circular variables in dist_plot</strong>, expanding its flexibility even further.</li>
</ul>

			</div>

			<div class="tags">
				
					
				
			</div>
</div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2025 visit <a href="https://github.com/The-Broken-Keyboard">My Profile</a> </div>
	</nav>
</div>

<script>feather.replace()</script>
</body>
</html>
